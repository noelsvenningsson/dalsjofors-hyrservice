<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dalsjöfors Hyrservice – Bokning</title>
  <link rel="stylesheet" href="/static/app.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="brand-logo-wrap">
        <img
          src="/static/logo-dhs.png"
          alt="Dalsjöfors Hyrservice logga"
          class="brand-logo"
          onerror="this.style.display='none'"
        />
      </div>
      <p class="kicker">Trygg släpvagnsuthyrning</p>
      <h1>Dalsjöfors Hyrservice</h1>
      <p class="lead">Boka ditt släp i fem enkla steg</p>
    </div>
  </header>

  <main id="wizard">
    <div class="progress-wrap" aria-live="polite">
      <div id="progress" class="progress">Steg 1 av 5</div>
      <ol class="progress-steps" id="progress-steps" aria-hidden="true">
        <li data-step="1" class="is-active">Släp</li>
        <li data-step="2">Tid</li>
        <li data-step="3">Datum</li>
        <li data-step="4">Betalning</li>
        <li data-step="5">Kvitto</li>
      </ol>
    </div>

    <!-- Steg 1: Välj släp -->
    <section id="step1" class="step">
      <h2>Välj släp</h2>
      <p class="step-intro">Välj vilken typ av släp du vill hyra.</p>
      <p class="report-cta-wrap">
        <a class="report-cta" href="/report-issue">Rapportera fel/skada på släp</a>
      </p>
      <div class="trailers">
        <button type="button" data-type="GALLER" class="card" id="card-galler">
          <h3>Galler-släp</h3>
          <ul class="spec-list">
            <li>Inv. mått: L: 258 cm · H: 107 cm · B: 128 cm</li>
            <li>Totalvikt: 750 kg</li>
            <li>Maxlast: 510 kg</li>
            <li>Bromsad: Ja</li>
          </ul>
          <p class="availability" id="availability-galler">2 Tillgängliga</p>
        </button>
        <button type="button" data-type="KAP" class="card" id="card-kap">
          <h3>Kåpsläp</h3>
          <ul class="spec-list">
            <li>Inv. mått: L: 258 cm · H: 140 cm · B: 128 cm</li>
            <li>Totalvikt: 1000 kg</li>
            <li>Maxlast: 690 kg</li>
            <li>Bromsad: Ja</li>
          </ul>
          <p class="availability" id="availability-kap">2 Tillgängliga</p>
        </button>
      </div>
      <div class="actions sticky-mobile">
        <button type="button" id="step1-next" class="primary" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 2: Välj hyrestid -->
    <section id="step2" class="step" hidden>
      <h2>Välj hyrestid</h2>
      <p class="step-intro">Välj om du vill hyra i två timmar eller heldag.</p>
      <div class="rental-options">
        <label>
          <input type="radio" name="rentalType" value="TWO_HOURS">
          2 timmar (200 kr)
        </label>
        <label>
          <input type="radio" name="rentalType" value="FULL_DAY">
          Heldag
        </label>
      </div>
      <div class="full-day-pricing">
        <p>Heldag vardag 250 kr</p>
        <p>Heldag helg/röd dag 300 kr</p>
      </div>
      <p id="price-info" class="info"></p>
      <div class="actions sticky-mobile">
        <button type="button" id="step2-back" class="secondary">Tillbaka</button>
        <button type="button" id="step2-next" class="primary" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 3: Datum och starttid -->
    <section id="step3" class="step" hidden>
      <h2>Välj datum och tid</h2>
      <p class="step-intro">Ange när uthyrningen ska starta.</p>
      <div class="date-time-picker">
        <label>Datum
          <input type="date" id="rental-date">
        </label>
        <p id="date-error" class="field-error" hidden></p>
        <label id="time-container" hidden>Tid
          <select id="rental-time"></select>
        </label>
        <p id="time-error" class="field-error" hidden></p>
        <div class="receipt-toggle">
          <input type="checkbox" id="receipt-requested">
          <label for="receipt-requested">Jag vill ha kvitto via e-post</label>
        </div>
        <div id="receiptEmailWrap" class="hidden">
          <label for="customer-email">Mailadress för kvitto</label>
          <input type="email" id="customer-email" placeholder="namn@exempel.se" autocomplete="email" maxlength="254">
        </div>
        <p id="email-error" class="field-error" hidden></p>
        <p class="helper-text">Kvitto skickas bara om du väljer detta. Ingen reklam.</p>
      </div>
      <p id="availability-info" class="info"></p>
      <div class="actions sticky-mobile">
        <button type="button" id="step3-back" class="secondary">Tillbaka</button>
        <button type="button" id="step3-next" class="primary" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 4: Sammanfattning -->
    <section id="step4" class="step" hidden>
      <h2>Sammanfattning</h2>
      <p class="step-intro">Kontrollera uppgifterna, acceptera villkoren och starta sedan betalningen.</p>
      <div id="summary" class="summary-list"></div>
      <div class="terms-consent">
        <label class="terms-checkbox-label" for="terms-accepted">
          <input type="checkbox" id="terms-accepted">
          Jag accepterar <a href="/terms" target="_blank" rel="noopener noreferrer">villkoren</a>
        </label>
        <p id="terms-error" class="field-error" hidden></p>
      </div>
      <div id="payment-panel" class="payment-panel" hidden>
        <div id="payment-status-row" class="payment-status-row" aria-live="polite">
          <span id="payment-status-dot" class="payment-status-dot is-pending"></span>
          <strong id="payment-status-text">Startar betalningsflöde</strong>
        </div>
        <p id="payment-info" class="info loading">Skapar betalningsförfrågan …</p>
        <div class="payment-actions">
          <a id="open-swish-link" class="open-swish-link" href="#" hidden>Öppna Swish</a>
          <button type="button" id="check-payment-status">Jag har betalat – kontrollera igen</button>
          <button type="button" id="retry-payment" hidden>Försök igen</button>
        </div>
        <div class="qr-wrap" id="qr-wrap" hidden>
          <img id="payment-qr" src="" alt="Swish QR" width="320" height="320">
        </div>
      </div>
      <div class="actions sticky-mobile">
        <button type="button" id="step4-back" class="secondary">Tillbaka</button>
        <button type="button" id="start-payment" class="primary" disabled>Starta betalning</button>
      </div>
    </section>

    <section id="step5" class="step" hidden>
      <h2>Bokningskvitto</h2>
      <p class="step-intro">Kort sammanfattning av din bokning.</p>
      <div id="confirmation" class="summary-list receipt-list"></div>
      <div class="receipt-company">
        <p><strong>Dalsjöfors Hyrservice AB</strong></p>
        <p>Org.nr: 559062-4556</p>
        <p>Boråsvägen 58B, 516 34 Dalsjöfors</p>
        <p>Telefon: 070-457 97 09</p>
      </div>
    </section>

    <!-- Dev‑panel (visas endast med ?dev=1) -->
    <section id="dev-panel" class="dev" hidden>
      <h3>Dev‑panel</h3>
      <p id="debug-info"></p>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; 2026 Dalsjöfors Hyrservice AB</p>
    <p>Org.nr 559062-4556 • Boråsvägen 58B, 516 34 Dalsjöfors • 070-457 97 09</p>
    <p><a class="admin-link" href="/terms">Villkor och information</a></p>
    <p><a class="admin-link" href="/admin">Admin</a></p>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>
