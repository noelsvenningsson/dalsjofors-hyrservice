<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dalsjöfors Hyrservice – Bokning</title>
  <link rel="stylesheet" href="/static/app.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <p class="kicker">Trygg släpvagnsuthyrning</p>
      <h1>Dalsjöfors Hyrservice</h1>
      <p class="lead">Boka ditt släp i fem enkla steg</p>
    </div>
  </header>

  <main id="wizard">
    <div id="progress" class="progress" aria-live="polite">Steg 1 av 5</div>

    <!-- Steg 1: Välj släp -->
    <section id="step1" class="step">
      <h2>Välj släp</h2>
      <p class="step-intro">Välj vilken typ av släp du vill hyra.</p>
      <div class="trailers">
        <button type="button" data-type="GALLER" class="card" id="card-galler">
          <h3>Galler-släp</h3>
          <ul class="spec-list">
            <li>Inv. mått: 258 × 128 × 26 cm</li>
            <li>Totalvikt: 750 kg</li>
            <li>Maxlast: 510 kg</li>
            <li>Bromsad: Ja</li>
          </ul>
          <p class="availability" id="availability-galler">–/2 lediga</p>
        </button>
        <button type="button" data-type="KAP" class="card" id="card-kap">
          <h3>Kåpsläp</h3>
          <ul class="spec-list">
            <li>Inv. mått: 258 × 128 × 140 cm</li>
            <li>Totalvikt: 1000 kg</li>
            <li>Maxlast: 690 kg</li>
            <li>Bromsad: Ja</li>
          </ul>
          <p class="availability" id="availability-kap">–/2 lediga</p>
        </button>
      </div>
      <div class="actions">
        <button type="button" id="step1-next" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 2: Välj hyrestid -->
    <section id="step2" class="step" hidden>
      <h2>Välj hyrestid</h2>
      <p class="step-intro">Välj om du vill hyra i två timmar eller heldag.</p>
      <div class="rental-options">
        <label>
          <input type="radio" name="rentalType" value="TWO_HOURS">
          2 timmar (200 kr)
        </label>
        <label>
          <input type="radio" name="rentalType" value="FULL_DAY">
          Heldag
        </label>
      </div>
      <div class="full-day-pricing">
        <p>Heldag vardag 250 kr</p>
        <p>Heldag helg/röd dag 300 kr</p>
      </div>
      <p id="price-info" class="info"></p>
      <p id="daytype-badge" class="daytype-badge" hidden></p>
      <div class="actions">
        <button type="button" id="step2-back">Tillbaka</button>
        <button type="button" id="step2-next" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 3: Datum och starttid -->
    <section id="step3" class="step" hidden>
      <h2>Välj datum och tid</h2>
      <p class="step-intro">Ange när uthyrningen ska starta.</p>
      <div class="date-time-picker">
        <label>Datum
          <input type="date" id="rental-date">
        </label>
        <label id="time-container" hidden>Tid
          <select id="rental-time"></select>
        </label>
        <label>Mobilnummer för kvitto (valfritt)
          <input type="tel" id="customer-phone" placeholder="+4670xxxxxxx eller 07xxxxxxxx">
        </label>
        <p class="helper-text">Används bara för bokningskvitto. Ingen reklam.</p>
      </div>
      <p id="availability-info" class="info"></p>
      <div class="actions">
        <button type="button" id="step3-back">Tillbaka</button>
        <button type="button" id="step3-next" disabled>Nästa</button>
      </div>
    </section>

    <!-- Steg 4: Sammanfattning -->
    <section id="step4" class="step" hidden>
      <h2>Sammanfattning</h2>
      <p class="step-intro">Kontrollera uppgifterna. Betalningsförfrågan skapas automatiskt.</p>
      <div id="summary" class="summary-list"></div>
      <div id="payment-panel" class="payment-panel" hidden>
        <p id="payment-info" class="info loading">Skapar betalningsförfrågan …</p>
        <div class="payment-actions">
          <a id="open-swish-link" class="open-swish-link" href="#" hidden>Öppna Swish</a>
          <button type="button" id="retry-payment" hidden>Försök igen</button>
        </div>
        <div class="qr-wrap" id="qr-wrap" hidden>
          <img id="payment-qr" src="" alt="Swish QR" width="320" height="320">
        </div>
      </div>
      <div class="actions">
        <button type="button" id="step4-back">Tillbaka</button>
      </div>
    </section>

    <section id="step5" class="step" hidden>
      <h2>Bokningskvitto</h2>
      <p class="step-intro">Kort sammanfattning av din bokning.</p>
      <div id="confirmation" class="summary-list receipt-list"></div>
      <div class="receipt-company">
        <p><strong>Dalsjöfors Hyrservice AB</strong></p>
        <p>Org.nr: 559062-4556</p>
        <p>Boråsvägen 58B, 516 34 Dalsjöfors</p>
        <p>Telefon: 070-457 97 09</p>
      </div>
    </section>

    <!-- Dev‑panel (visas endast med ?dev=1) -->
    <section id="dev-panel" class="dev" hidden>
      <h3>Dev‑panel</h3>
      <p id="debug-info"></p>
      <button type="button" id="dev-book">Skapa testbokning</button>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; 2026 Dalsjöfors Hyrservice AB</p>
    <p>Dalsjöfors Hyrservice AB • Org.nr: 559062-4556 • Momsnr: SE559062455601 • Adress: Boråsvägen 58B, 516 34 Dalsjöfors • Telefon: 070‑457 97 09</p>
    <p>Frågor eller problem? Ring <strong>070‑457 97 09</strong></p>
    <p><a class="admin-link" href="/admin">Admin</a></p>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>
